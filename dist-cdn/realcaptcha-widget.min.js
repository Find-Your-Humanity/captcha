!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["React","ReactDOM"],t):"object"==typeof exports?exports.RealCaptcha=t(require("react"),require("react-dom")):e.RealCaptcha=t(e.React,e.ReactDOM)}(this,(e,t)=>(()=>{"use strict";var n={20:(e,t,n)=>{var r=n(156),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,c=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!s.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:l,ref:u,props:i,_owner:c.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],c=0;c<e.length;c++){var s=e[c],l=r.base?s[0]+r.base:s[0],u=i[l]||0,d="".concat(l," ").concat(u);i[l]=u+1;var h=n(d),f={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==h)t[h].references++,t[h].updater(f);else{var p=o(f,r);r.byIndex=c,t.splice(c,0,{identifier:d,updater:p,references:1})}a.push(d)}return a}function o(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var c=n(i[a]);t[c].references--}for(var s=r(e,o),l=0;l<i.length;l++){var u=n(i[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=s}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},132:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([e.id,".captcha-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.captcha-button {\n  display: flex;\n  align-items: center;\n  width: 320px;\n  height: 60px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  padding: 0 16px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n\n.captcha-button:hover {\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n}\n\n.captcha-left {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  margin-right: 12px;\n}\n\n.checkbox {\n  width: 20px;\n  height: 20px;\n  border: 2px solid #ccc;\n  border-radius: 2px;\n  background-color: #ffffff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  cursor: pointer;\n  user-select: none;\n}\n\n.checkbox.error {\n  border-color: #f44336;\n}\n\n.checkbox-inner {\n  width: 12px;\n  height: 12px;\n  background-color: transparent;\n  border-radius: 1px;\n  transition: all 0.2s ease;\n}\n\n.checkbox-inner.error {\n  background-color: transparent;\n}\n\n.loading-spinner {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n}\n\n.spinner {\n  width: 20px;\n  height: 20px;\n  border: 2px solid #e0e0e0;\n  border-top: 2px solid #4285f4;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.loading-text {\n  font-size: 10px;\n  color: #4285f4;\n  font-weight: 500;\n}\n\n.success-check {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n}\n\n.captcha-center {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.captcha-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n}\n\n.captcha-right {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  margin-left: 12px;\n}\n\n.refresh-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 50%;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.refresh-button:hover {\n  background-color: #f5f5f5;\n}\n\n.error-message {\n  color: #f44336;\n  font-size: 12px;\n  font-weight: 500;\n  text-align: center;\n  margin-top: 4px;\n}\n\n/* 상태별 스타일 */\n.captcha-button.loading {\n  background-color: #f8f9fa;\n}\n\n.captcha-button.success {\n  background-color: #f1f8e9;\n  border-color: #4caf50;\n}\n\n.captcha-button.error {\n  background-color: #ffebee;\n  border-color: #f44336;\n} ",""]);const c=a},156:t=>{t.exports=e},299:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([e.id,".image-captcha {\n  width: 400px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.captcha-header {\n  background-color: #f5f5f5;\n  padding: 16px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.header-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n  text-align: center;\n  display: block;\n}\n\n.image-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 2.5px;\n  background-color: #e0e0e0;\n  padding: 2.5px;\n}\n\n.image-item {\n  position: relative;\n  aspect-ratio: 1;\n  background-color: #ffffff;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.image-item:hover {\n  background-color: #f8f9fa;\n}\n\n.image-item.selected {\n  background-color: #e3f2fd;\n}\n\n.image-placeholder {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  background-repeat: no-repeat;\n  background-size: 300% 300%;\n}\n\n.selection-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(66, 133, 244, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 2px;\n}\n\n.captcha-controls {\n  background-color: #f5f5f5;\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #e0e0e0;\n}\n\n.control-left {\n  display: flex;\n  gap: 8px;\n}\n\n.control-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.control-button:hover {\n  background-color: #e0e0e0;\n}\n\n.verify-button {\n  background-color: #f5f5f5;\n  color: #999;\n  border: 1px solid #e0e0e0;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: not-allowed;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.verify-button.active {\n  background-color: #4285f4;\n  color: #ffffff;\n  border-color: #4285f4;\n  cursor: pointer;\n}\n\n.verify-button.active:hover {\n  background-color: #3367d6;\n} ",""]);const c=a},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(a[s]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},318:e=>{e.exports=t},338:(e,t,n)=>{var r=n(318);t.H=r.createRoot,r.hydrateRoot},386:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([e.id,".warm-feeling-captcha {\n  width: 400px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.captcha-header {\n  background-color: #f5f5f5;\n  padding: 16px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.header-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n  text-align: center;\n  display: block;\n}\n\n.image-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 2.5px;\n  background-color: #e0e0e0;\n  padding: 2.5px;\n}\n\n.image-item {\n  position: relative;\n  aspect-ratio: 1;\n  background-color: #ffffff;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.image-item:hover {\n  background-color: #f8f9fa;\n}\n\n.image-item.selected {\n  background-color: #e3f2fd;\n}\n\n.image-placeholder {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n\n.placeholder-content {\n  font-size: 24px;\n  color: #666;\n}\n\n.image-placeholder img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.selection-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(66, 133, 244, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 2px;\n}\n\n.captcha-controls {\n  background-color: #f5f5f5;\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #e0e0e0;\n}\n\n.control-left {\n  display: flex;\n  gap: 8px;\n}\n\n.control-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.control-button:hover {\n  background-color: #e0e0e0;\n}\n\n.verify-button {\n  background-color: #f5f5f5;\n  color: #999;\n  border: 1px solid #e0e0e0;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: not-allowed;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.verify-button.active {\n  background-color: #4285f4;\n  color: #ffffff;\n  border-color: #4285f4;\n  cursor: pointer;\n}\n\n.verify-button.active:hover {\n  background-color: #3367d6;\n} ",""]);const c=a},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},569:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([e.id,".handwriting-captcha {\n  width: 500px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.captcha-header {\n  background-color: #f5f5f5;\n  padding: 16px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.header-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n  text-align: center;\n  display: block;\n}\n\n.images-container {\n  display: flex;\n  gap: 8px;\n  padding: 16px;\n  background-color: #ffffff;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.image-slot {\n  flex: 1;\n  aspect-ratio: 1;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.image-slot img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.handwriting-area {\n  padding: 16px;\n  background-color: #ffffff;\n}\n\n.grid-pattern {\n  width: 100%;\n  height: 200px;\n  background-image: \n    linear-gradient(rgba(200, 200, 200, 0.3) 1px, transparent 1px),\n    linear-gradient(90deg, rgba(200, 200, 200, 0.3) 1px, transparent 1px);\n  background-size: 20px 20px;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  position: relative;\n}\n\n.drawing-canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  cursor: crosshair;\n  background-color: transparent;\n}\n\n.captcha-controls {\n  background-color: #f5f5f5;\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #e0e0e0;\n}\n\n.control-left {\n  display: flex;\n  gap: 8px;\n}\n\n.control-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.control-button:hover {\n  background-color: #e0e0e0;\n}\n\n.control-button.disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.control-button.disabled:hover {\n  background-color: transparent;\n}\n\n.verify-button {\n  background-color: #4285f4;\n  color: #ffffff;\n  border: 1px solid #4285f4;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.verify-button:hover {\n  background-color: #3367d6;\n} ",""]);const c=a},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},848:(e,t,n)=>{e.exports=n(20)}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={id:e,exports:{}};return n[e](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nc=void 0;var i={};o.r(i),o.d(i,{RealCaptcha:()=>le,default:()=>ue});var a=o(156),c=o.n(a),s=o(338),l=o(848),u=o(72),d=o.n(u),h=o(825),f=o.n(h),p=o(659),g=o.n(p),v=o(56),m=o.n(v),y=o(540),b=o.n(y),x=o(113),w=o.n(x),k=o(132),S={};S.styleTagTransform=w(),S.setAttributes=m(),S.insert=g().bind(null,"head"),S.domAPI=f(),S.insertStyleElement=b();d()(k.A,S);k.A&&k.A.locals&&k.A.locals;var j=o(299),T={};T.styleTagTransform=w(),T.setAttributes=m(),T.insert=g().bind(null,"head"),T.domAPI=f(),T.insertStyleElement=b();d()(j.A,T);j.A&&j.A.locals&&j.A.locals;var E=[],_={captcha:0,image:0,abstractFeeling:0,handwriting:0};function C(e){E.push(e),function(){try{var e=parseInt(localStorage.getItem("current_sequence")||"0")+1,t="behavior_data_".concat(e);localStorage.setItem(t,JSON.stringify(E)),localStorage.setItem("current_sequence",e.toString()),E=[]}catch(e){}}()}const I=function(){function e(){this.isTracking=!1,this.lastMousePosition=null,this.metrics={sessionId:"image_".concat(Date.now()),startTime:Date.now(),endTime:0,totalTime:0,imageInteractions:{},selectionOrder:[],deselectionOrder:[],finalSelection:[],mouseTrajectory:[],refreshCount:0,verifyAttempts:0,verificationSuccess:!1,attemptDuration:0};for(var e=0;e<9;e++)this.metrics.imageInteractions[e]={imageId:e,clicks:[],hovers:[],totalHoverTime:0,isSelected:!1,interactionDensity:{clickCount:0,hoverCount:0,totalHoverTime:0,averageDwellTime:0,density:0}}}return e.prototype.startTracking=function(){this.isTracking=!0,this.metrics.startTime=Date.now()},e.prototype.stopTracking=function(){this.isTracking=!1,this.metrics.endTime=Date.now(),this.metrics.totalTime=this.metrics.endTime-this.metrics.startTime,this.saveToLocalStorage()},e.prototype.trackMouseMove=function(e,t){var n;if(this.isTracking){var r=Date.now(),o=null===(n=document.querySelector(".image-captcha"))||void 0===n?void 0:n.getBoundingClientRect();if(o){var i=o.width/2,a=o.height/2,c=Math.sqrt(Math.pow(e-i,2)+Math.pow(t-a,2)),s={x:e/o.width,y:t/o.height,distanceFromCenter:c,timestamp:r};this.metrics.mouseTrajectory.push(s),this.lastMousePosition=s}}},e.prototype.trackImageClick=function(e,t){if(this.isTracking){var n=this.metrics.imageInteractions[e];if(n){var r=t.target.getBoundingClientRect(),o=(t.clientX-r.left)/r.width,i=(t.clientY-r.top)/r.height,a={x:o,y:i,distanceFromCenter:Math.sqrt(Math.pow(o-.5,2)+Math.pow(i-.5,2)),timestamp:Date.now()};n.clicks.push(a),n.interactionDensity.clickCount++,this.updateInteractionDensity(n)}}},e.prototype.trackImageHover=function(e,t){if(this.isTracking){var n=this.metrics.imageInteractions[e];if(n){var r=Date.now();if(t)n.hovers.push({enter:r,leave:0}),n.interactionDensity.hoverCount++;else{var o=n.hovers[n.hovers.length-1];if(o&&0===o.leave){o.leave=r;var i=r-o.enter;n.totalHoverTime+=i,n.interactionDensity.totalHoverTime+=i}}this.updateInteractionDensity(n)}}},e.prototype.trackRefresh=function(){this.isTracking&&this.metrics.refreshCount++},e.prototype.trackVerifyAttempt=function(e){this.isTracking&&(this.metrics.verifyAttempts++,this.metrics.verificationSuccess=e,this.metrics.attemptDuration=Date.now()-this.metrics.startTime,this.metrics.finalSelection=Object.entries(this.metrics.imageInteractions).filter(function(e){e[0];return e[1].isSelected}).map(function(e){var t=e[0];return parseInt(t)}),this.saveToLocalStorage())},e.prototype.trackImageSelection=function(e,t){this.isTracking&&(this.metrics.imageInteractions[e]||(this.metrics.imageInteractions[e]={imageId:e,clicks:[],hovers:[],totalHoverTime:0,isSelected:!1,interactionDensity:{clickCount:0,hoverCount:0,totalHoverTime:0,averageDwellTime:0,density:0}}),t?(this.metrics.selectionOrder.push(e),this.metrics.imageInteractions[e].isSelected=!0):(this.metrics.deselectionOrder.push(e),this.metrics.imageInteractions[e].isSelected=!1))},e.prototype.updateInteractionDensity=function(e){var t=Date.now()-this.metrics.startTime;e.interactionDensity.averageDwellTime=e.interactionDensity.totalHoverTime/e.interactionDensity.hoverCount||0,e.interactionDensity.density=(e.interactionDensity.clickCount+e.interactionDensity.hoverCount)/(t||1)},e.prototype.saveToLocalStorage=function(){try{C(this.metrics)}catch(e){}},e.prototype.downloadMetrics=function(e){var t=JSON.stringify(this.metrics,null,2),n=new Blob([t],{type:"application/json"}),r=window.URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download=e||"image_behavior_".concat(this.metrics.sessionId,".json"),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(r)},e}();var M=function(){return M=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},M.apply(this,arguments)},N=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const D=function(e){var t=e.onSuccess,n=(0,a.useState)([]),r=n[0],o=n[1],i=(0,a.useState)(!1),c=(i[0],i[1]),s=(0,a.useRef)(new I);(0,a.useEffect)(function(){return s.current.startTracking(),function(){s.current.stopTracking()}},[]);var u=[{id:1,hasBike:!1,selected:!1,gridPosition:{row:1,col:1}},{id:2,hasBike:!1,selected:!1,gridPosition:{row:1,col:2}},{id:3,hasBike:!0,selected:!1,gridPosition:{row:1,col:3}},{id:4,hasBike:!1,selected:!1,gridPosition:{row:2,col:1}},{id:5,hasBike:!1,selected:!1,gridPosition:{row:2,col:2}},{id:6,hasBike:!0,selected:!1,gridPosition:{row:2,col:3}},{id:7,hasBike:!1,selected:!1,gridPosition:{row:3,col:1}},{id:8,hasBike:!1,selected:!1,gridPosition:{row:3,col:2}},{id:9,hasBike:!0,selected:!1,gridPosition:{row:3,col:3}}];return(0,l.jsxs)("div",M({className:"image-captcha",onMouseMove:function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;s.current.trackMouseMove(n,r)}},{children:[(0,l.jsx)("div",M({className:"captcha-header"},{children:(0,l.jsx)("span",M({className:"header-text"},{children:"Select all images with a bike."}))})),(0,l.jsx)("div",M({className:"image-grid"},{children:u.map(function(e){return(0,l.jsx)("div",M({className:"image-item ".concat(r.includes(e.id)?"selected":""),onClick:function(t){return n=e.id,i=t.nativeEvent,a=r.includes(n),o(function(e){return a?e.filter(function(e){return e!==n}):N(N([],e,!0),[n],!1)}),void s.current.trackImageClick(n,i);var n,i,a},onMouseEnter:function(){return s.current.trackImageHover(e.id,!0)},onMouseLeave:function(){return s.current.trackImageHover(e.id,!1)}},{children:(0,l.jsx)("div",M({className:"image-placeholder",style:{backgroundImage:"url(https://picsum.photos/450/450?random=bike)",backgroundPosition:"".concat(33.33*(e.gridPosition.col-1),"% ").concat(33.33*(e.gridPosition.row-1),"%"),backgroundSize:"300% 300%"}},{children:r.includes(e.id)&&(0,l.jsx)("div",M({className:"selection-overlay"},{children:(0,l.jsx)("svg",M({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#ffffff"})}))}))}))}),e.id)})})),(0,l.jsxs)("div",M({className:"captcha-controls"},{children:[(0,l.jsxs)("div",M({className:"control-left"},{children:[(0,l.jsx)("button",M({className:"control-button",onClick:function(){o([]),c(!1),s.current.trackRefresh()}},{children:(0,l.jsx)("svg",M({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))})),(0,l.jsx)("button",M({className:"control-button"},{children:(0,l.jsx)("svg",M({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z",fill:"#666"})}))})),(0,l.jsx)("button",M({className:"control-button"},{children:(0,l.jsxs)("svg",M({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"#666",strokeWidth:"2",fill:"none"}),(0,l.jsx)("path",{d:"M12 16v-4M12 8h.01",stroke:"#666",strokeWidth:"2",fill:"none"})]}))}))]})),(0,l.jsx)("button",M({className:"verify-button ".concat(r.length>0?"active":""),onClick:function(){var e=r.filter(function(e){var t=u.find(function(t){return t.id===e});return null==t?void 0:t.hasBike}),n=r.filter(function(e){var t=u.find(function(t){return t.id===e});return t&&!t.hasBike}),i=3===e.length&&0===n.length;s.current.trackVerifyAttempt(i),i?(c(!0),setTimeout(function(){null==t||t()},1e3)):o([])},disabled:0===r.length},{children:"VERIFY"}))]}))]}))};var P=o(386),L={};L.styleTagTransform=w(),L.setAttributes=m(),L.insert=g().bind(null,"head"),L.domAPI=f(),L.insertStyleElement=b();d()(P.A,L);P.A&&P.A.locals&&P.A.locals;var R=function(){return R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},R.apply(this,arguments)},O=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((r=r.apply(e,t||[])).next())})},A=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},z=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const B=function(e){e.onSuccess;var t=(0,a.useState)([]),n=t[0],r=t[1],o=(0,a.useState)(!1),i=(o[0],o[1]),c=(0,a.useState)(!1),s=c[0],u=c[1],d=(0,a.useState)(""),h=d[0],f=d[1],p=(0,a.useState)(""),g=p[0],v=p[1],m=(0,a.useState)(""),y=m[0],b=m[1],x=(0,a.useState)(0),w=x[0],k=x[1],S=(0,a.useState)([]),j=S[0],T=S[1],E=(0,a.useRef)(new I),_=!1,C="https://api.realcatcha.com";(0,a.useEffect)(function(){return E.current.startTracking(),M(),function(){E.current.stopTracking()}},[]),(0,a.useEffect)(function(){if(!(w<=0)){var e=setInterval(function(){return k(function(e){return e>0?e-1:0})},1e3);return function(){return clearInterval(e)}}},[w]);var M=function(){return O(void 0,void 0,void 0,function(){var e,t,n,o;return A(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,4,5]),u(!0),f(""),r([]),i(!1),[4,fetch("".concat(C,"/api/abstract-captcha"),{method:"POST"})];case 1:if(!(e=a.sent()).ok)throw new Error("HTTP ".concat(e.status));return[4,e.json()];case 2:return t=a.sent(),v(t.challenge_id),b(t.question||"이미지를 선택하세요"),k(t.ttl||45),n=t.images||[],o=n.map(function(e){return{id:e.id,url:e.url.startsWith("http")?e.url:"".concat(C).concat(e.url)}}),T(o),[3,5];case 3:return a.sent(),f("문제를 불러오지 못했습니다. 다시 시도해주세요."),[3,5];case 4:return u(!1),[7];case 5:return[2]}})})};return(0,l.jsxs)("div",R({className:"warm-feeling-captcha",onMouseMove:function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;E.current.trackMouseMove(n,r)}},{children:[(0,l.jsx)("div",R({className:"captcha-header"},{children:(0,l.jsxs)("span",R({className:"header-text"},{children:[y,w>0?" · ".concat(w,"s"):""]}))})),h&&(0,l.jsx)("div",R({style:{padding:8,color:"#c00",fontSize:12,textAlign:"center"}},{children:h})),(0,l.jsx)("div",R({className:"image-grid"},{children:j.map(function(e){return(0,l.jsxs)("div",R({className:"image-item ".concat(n.includes(e.id)?"selected":""),onClick:function(){return t=e.id,o=n.includes(t),r(function(e){return o?e.filter(function(e){return e!==t}):z(z([],e,!0),[t],!1)}),void E.current.trackImageSelection(t,!o);var t,o},onMouseEnter:function(){return E.current.trackImageHover(e.id,!0)},onMouseLeave:function(){return E.current.trackImageHover(e.id,!1)}},{children:[(0,l.jsx)("div",R({className:"image-placeholder"},{children:(0,l.jsx)("img",{src:e.url,alt:"Image ".concat(e.id)})})),n.includes(e.id)&&(0,l.jsx)("div",R({className:"selection-overlay"},{children:(0,l.jsx)("svg",R({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#ffffff"})}))}))]}),e.id)})})),(0,l.jsxs)("div",R({className:"captcha-controls"},{children:[(0,l.jsx)("div",R({className:"control-left"},{children:(0,l.jsx)("button",R({className:"control-button",onClick:function(){r([]),i(!1),E.current.trackRefresh(),M()},disabled:s},{children:(0,l.jsx)("svg",R({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))}))})),(0,l.jsx)("button",R({className:"verify-button ".concat(n.length>0?"active":""),onClick:function(){return O(void 0,void 0,void 0,function(){var e,t,o,a,c;return A(this,function(s){switch(s.label){case 0:if(!g)return[2];_,s.label=1;case 1:return s.trys.push([1,4,5,6]),u(!0),e={challenge_id:g,selections:n},[4,fetch("".concat(C,"/api/abstract-verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 2:if(!(t=s.sent()).ok)throw new Error("HTTP ".concat(t.status));return[4,t.json()];case 3:return o=s.sent(),a=!!o.success,E.current.trackVerifyAttempt(a),a?(c=o&&o.redirect_url||"")&&"undefined"!=typeof window?(window.location.href=c,[2]):(i(!0),[2]):(alert("정답이 아닙니다. 다시 시도해주세요."),r([]),M(),[3,6]);case 4:return s.sent(),f("검증에 실패했습니다. 다시 시도해주세요."),[3,6];case 5:return u(!1),[7];case 6:return[2]}})})},disabled:0===n.length||s},{children:"VERIFY"}))]}))]}))};var q=o(569),H={};H.styleTagTransform=w(),H.setAttributes=m(),H.insert=g().bind(null,"head"),H.domAPI=f(),H.insertStyleElement=b();d()(q.A,H);q.A&&q.A.locals&&q.A.locals;const V=function(){function e(){this.isTracking=!1,this.currentStroke=[],this.lastStrokeEnd=0,this.metrics={strokeCount:0,strokeLengths:[],strokeDurations:[],strokeIntervals:[],strokeCurvatures:[],strokeJitters:[],directionChanges:[],hesitationPoints:[],totalTime:0,averageSpeed:0,speedVariations:[],sessionId:"handwriting_".concat(Date.now()),startTime:Date.now(),endTime:0,verificationSuccess:!1}}return e.prototype.startTracking=function(){this.isTracking=!0,this.metrics.startTime=Date.now()},e.prototype.stopTracking=function(){this.isTracking&&(this.isTracking=!1,this.metrics.endTime=Date.now(),this.metrics.totalTime=this.metrics.endTime-this.metrics.startTime,this.saveToLocalStorage())},e.prototype.startStroke=function(e,t){if(this.isTracking){var n=Date.now(),r={x:e,y:t,timestamp:n};this.currentStroke=[r],this.lastStrokeEnd>0&&this.metrics.strokeIntervals.push(n-this.lastStrokeEnd)}},e.prototype.addPoint=function(e,t){if(this.isTracking&&0!==this.currentStroke.length){var n={x:e,y:t,timestamp:Date.now()};this.currentStroke.push(n),this.updateMetrics()}},e.prototype.endStroke=function(){if(this.isTracking&&!(this.currentStroke.length<2)){this.metrics.strokeCount++,this.lastStrokeEnd=Date.now();var e=this.calculateStrokeLength(),t=this.currentStroke[this.currentStroke.length-1].timestamp-this.currentStroke[0].timestamp,n=this.calculateCurvature(),r=this.calculateJitter(),o=this.calculateDirectionChanges(),i=this.calculateHesitations();this.metrics.strokeLengths.push(e),this.metrics.strokeDurations.push(t),this.metrics.strokeCurvatures.push(n),this.metrics.strokeJitters.push(r),this.metrics.directionChanges.push(o),this.metrics.hesitationPoints.push(i);var a=e/t;this.metrics.speedVariations.push(a),this.updateAverages(),this.currentStroke=[]}},e.prototype.calculateStrokeLength=function(){for(var e=0,t=1;t<this.currentStroke.length;t++){var n=this.currentStroke[t].x-this.currentStroke[t-1].x,r=this.currentStroke[t].y-this.currentStroke[t-1].y;e+=Math.sqrt(n*n+r*r)}return e},e.prototype.calculateCurvature=function(){if(this.currentStroke.length<3)return 0;for(var e=0,t=1;t<this.currentStroke.length-1;t++){var n=this.currentStroke[t-1],r=this.currentStroke[t],o=this.currentStroke[t+1],i=Math.atan2(r.y-n.y,r.x-n.x),a=Math.atan2(o.y-r.y,o.x-r.x);e+=Math.abs(a-i)}return e/(this.currentStroke.length-2)},e.prototype.calculateJitter=function(){if(this.currentStroke.length<3)return 0;for(var e=0,t=1;t<this.currentStroke.length-1;t++){var n={x:(this.currentStroke[t-1].x+this.currentStroke[t+1].x)/2,y:(this.currentStroke[t-1].y+this.currentStroke[t+1].y)/2},r=this.currentStroke[t];e+=Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2))}return e/(this.currentStroke.length-2)},e.prototype.calculateDirectionChanges=function(){if(this.currentStroke.length<3)return 0;for(var e=0,t=Math.atan2(this.currentStroke[1].y-this.currentStroke[0].y,this.currentStroke[1].x-this.currentStroke[0].x),n=2;n<this.currentStroke.length;n++){var r=Math.atan2(this.currentStroke[n].y-this.currentStroke[n-1].y,this.currentStroke[n].x-this.currentStroke[n-1].x);Math.abs(r-t)>Math.PI/4&&e++,t=r}return e},e.prototype.calculateHesitations=function(){if(this.currentStroke.length<2)return 0;for(var e=0,t=1;t<this.currentStroke.length;t++){var n=this.currentStroke[t].timestamp-this.currentStroke[t-1].timestamp,r=this.currentStroke[t].x-this.currentStroke[t-1].x,o=this.currentStroke[t].y-this.currentStroke[t-1].y;Math.sqrt(r*r+o*o)/n<.1&&e++}return e},e.prototype.updateAverages=function(){var e=this.metrics.strokeLengths.reduce(function(e,t){return e+t},0),t=this.metrics.strokeDurations.reduce(function(e,t){return e+t},0);this.metrics.averageSpeed=e/t},e.prototype.updateMetrics=function(){if(this.currentStroke.length>=2){var e=this.currentStroke[this.currentStroke.length-1],t=this.currentStroke[this.currentStroke.length-2],n=e.timestamp-t.timestamp,r=e.x-t.x,o=e.y-t.y,i=Math.sqrt(r*r+o*o)/n;this.metrics.speedVariations.push(i)}},e.prototype.setVerificationResult=function(e){this.metrics.verificationSuccess=e,this.saveToLocalStorage()},e.prototype.saveToLocalStorage=function(){try{var e="handwriting_behavior_".concat(this.metrics.sessionId);localStorage.setItem(e,JSON.stringify(this.metrics))}catch(e){}},e.prototype.downloadMetrics=function(){var e=JSON.stringify(this.metrics,null,2),t=new Blob([e],{type:"application/json"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="handwriting_behavior_".concat(Date.now(),".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},e.prototype.reset=function(){this.currentStroke=[],this.metrics={strokeCount:0,strokeLengths:[],strokeDurations:[],strokeIntervals:[],strokeCurvatures:[],strokeJitters:[],directionChanges:[],hesitationPoints:[],totalTime:0,averageSpeed:0,speedVariations:[],sessionId:"handwriting_".concat(Date.now()),startTime:Date.now(),endTime:0,verificationSuccess:!1},this.lastStrokeEnd=0,this.isTracking=!0},e}();var U=function(){return U=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},U.apply(this,arguments)},Y=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((r=r.apply(e,t||[])).next())})},F=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},J=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const K=function(e){e.onSuccess;var t=(0,a.useState)(!1),n=t[0],r=t[1],o=(0,a.useState)(""),i=(o[0],o[1],(0,a.useState)("")),c=(i[0],i[1]),s=(0,a.useState)([]),u=s[0],d=s[1],h=(0,a.useRef)(null),f=(0,a.useRef)(null),p=(0,a.useRef)(new V);(0,a.useEffect)(function(){var e=h.current;if(e){e.width=2*e.offsetWidth,e.height=2*e.offsetHeight,e.style.width="".concat(e.offsetWidth,"px"),e.style.height="".concat(e.offsetHeight,"px");var t=e.getContext("2d");if(t)return t.scale(2,2),t.lineCap="round",t.strokeStyle="#000000",t.lineWidth=2,f.current=t,p.current.startTracking(),function(){p.current.stopTracking()}}},[]);var g=function(){var e;r(!1),null===(e=f.current)||void 0===e||e.closePath(),p.current.endStroke()},v=function(){var e=h.current;if(e){var t=e.getContext("2d");t&&(t.clearRect(0,0,e.width,e.height),d([]),p.current.reset())}};return(0,l.jsxs)("div",U({className:"handwriting-captcha"},{children:[(0,l.jsx)("div",U({className:"captcha-header"},{children:(0,l.jsx)("span",U({className:"header-text"},{children:"Look at the images and write the keywords that come to mind by hand."}))})),(0,l.jsx)("div",U({className:"images-container"},{children:[{id:1,src:"/4.jpg",alt:"Kingfisher bird"},{id:2,src:"/5.jpg",alt:"Mountain landscape"},{id:3,src:"/6.jpg",alt:"Person on bicycle"},{id:4,src:"/7.jpg",alt:"Kingfisher bird duplicate"},{id:5,src:"/8.jpg",alt:"Mountain landscape duplicate"}].map(function(e){return(0,l.jsx)("div",U({className:"image-slot"},{children:(0,l.jsx)("img",{src:e.src,alt:e.alt})}),e.id)})})),(0,l.jsx)("div",U({className:"handwriting-area"},{children:(0,l.jsx)("div",U({className:"grid-pattern"},{children:(0,l.jsx)("canvas",{ref:h,className:"drawing-canvas",onMouseDown:function(e){var t,n;r(!0);var o=e.nativeEvent,i=o.offsetX,a=o.offsetY;null===(t=f.current)||void 0===t||t.beginPath(),null===(n=f.current)||void 0===n||n.moveTo(i,a),p.current.startStroke(i,a);var c=h.current;if(c&&f.current){var s=f.current.getImageData(0,0,c.width,c.height);d(function(e){return J(J([],e,!0),[s],!1)})}},onMouseMove:function(e){var t,r;if(n){var o=e.nativeEvent,i=o.offsetX,a=o.offsetY;null===(t=f.current)||void 0===t||t.lineTo(i,a),null===(r=f.current)||void 0===r||r.stroke(),p.current.addPoint(i,a)}},onMouseUp:g,onMouseLeave:g})}))})),(0,l.jsxs)("div",U({className:"captcha-controls"},{children:[(0,l.jsxs)("div",U({className:"control-left"},{children:[(0,l.jsx)("button",U({className:"control-button",onClick:function(){v(),c("")}},{children:(0,l.jsx)("svg",U({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))})),(0,l.jsx)("button",U({className:"control-button ".concat(0===u.length?"disabled":""),onClick:function(){if(0!==u.length){var e=h.current;if(e&&f.current){var t=u.slice(0,-1);if(d(t),f.current.clearRect(0,0,e.width,e.height),t.length>0){var n=t[t.length-1];f.current.putImageData(n,0,0)}}}},disabled:0===u.length},{children:(0,l.jsx)("svg",U({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z",fill:0===u.length?"#ccc":"#666"})}))})),(0,l.jsx)("button",U({className:"control-button"},{children:(0,l.jsx)("svg",U({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z",fill:"#666"})}))})),(0,l.jsx)("button",U({className:"control-button"},{children:(0,l.jsxs)("svg",U({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"#666",strokeWidth:"2",fill:"none"}),(0,l.jsx)("path",{d:"M12 16v-4M12 8h.01",stroke:"#666",strokeWidth:"2",fill:"none"})]}))}))]})),(0,l.jsx)("button",U({className:"verify-button ".concat(u.length>0?"active":""),onClick:function(){return Y(void 0,void 0,void 0,function(){var e,t,n,r,o;return F(this,function(i){switch(i.label){case 0:if(0===u.length)return alert("손글씨를 먼저 작성해주세요."),[2];if(!(e=h.current))return alert("캔버스를 찾을 수 없습니다. 다시 시도해주세요."),[2];i.label=1;case 1:return i.trys.push([1,4,,5]),t=e.toDataURL("image/png"),[4,fetch("".concat("https://api.realcatcha.com","/api/verify-handwriting"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_base64:t})})];case 2:if(!(n=i.sent()).ok)throw new Error("HTTP error! status: ".concat(n.status));return[4,n.json()];case 3:return(r=i.sent()).success?(p.current.setVerificationResult(!0),o=r.redirect_url||document.referrer||window.location.origin,"undefined"!=typeof window&&window.location.assign(o)):(p.current.setVerificationResult(!1),alert("정답이 아닙니다. 다시 시도해주세요."),v(),c("")),[3,5];case 4:return i.sent(),alert("서버 검증 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요."),[3,5];case 5:return[2]}})})},disabled:0===u.length},{children:"VERIFY"}))]}))]}))};function X(){var e=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod|android|blackberry|windows phone/i.test(e)||"maxTouchPoints"in navigator&&navigator.maxTouchPoints>0?"mobile":"desktop"}var W=null,G={sessionId:"mobile_".concat(Date.now()),startTime:Date.now(),deviceInfo:{userAgent:navigator.userAgent,screenSize:{width:window.screen.width,height:window.screen.height},orientation:window.screen.height>window.screen.width?"portrait":"landscape"},touchEvents:[],touchPatterns:{averageDuration:0,averageForce:0,averageDistance:0,averageSpeed:0,multiTouchCount:0,totalTouches:0}};function $(e){var t=e.touches[0];(W={startTime:Date.now(),startPosition:{x:t.clientX,y:t.clientY},force:t.force||0,touchPoints:[{x:t.clientX,y:t.clientY,timestamp:Date.now(),force:t.force||0}],isMultiTouch:e.touches.length>1,touchCount:e.touches.length}).isMultiTouch&&G.touchPatterns.multiTouchCount++,G.touchPatterns.totalTouches++}function Q(e){if(W){var t=e.touches[0];W.touchPoints.push({x:t.clientX,y:t.clientY,timestamp:Date.now(),force:t.force||0})}}function Z(e){if(W){var t=Date.now(),n=e.changedTouches[0];W.endTime=t,W.duration=t-W.startTime,W.endPosition={x:n.clientX,y:n.clientY};var r=W.endPosition.x-W.startPosition.x,o=W.endPosition.y-W.startPosition.y;W.distance=Math.sqrt(r*r+o*o),W.speed=W.distance/W.duration,G.touchEvents.push(W),function(){var e=G.touchEvents;if(0===e.length)return;G.touchPatterns={averageDuration:e.reduce(function(e,t){return e+(t.duration||0)},0)/e.length,averageForce:e.reduce(function(e,t){return e+t.force},0)/e.length,averageDistance:e.reduce(function(e,t){return e+(t.distance||0)},0)/e.length,averageSpeed:e.reduce(function(e,t){return e+(t.speed||0)},0)/e.length,multiTouchCount:e.filter(function(e){return e.isMultiTouch}).length,totalTouches:e.length}}(),W=null}}function ee(){try{var e=parseInt(localStorage.getItem("mobile_sequence")||"0")+1,t="mobile_behavior_".concat(e);G.endTime=Date.now(),localStorage.setItem(t,JSON.stringify(G)),localStorage.setItem("mobile_sequence",e.toString()),G={sessionId:"mobile_".concat(Date.now()),startTime:Date.now(),deviceInfo:G.deviceInfo,touchEvents:[],touchPatterns:{averageDuration:0,averageForce:0,averageDistance:0,averageSpeed:0,multiTouchCount:0,totalTouches:0}}}catch(e){}}var te=function(){return te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},te.apply(this,arguments)},ne=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((r=r.apply(e,t||[])).next())})},re=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};const oe=function(e){var t=e.siteKey,n=void 0===t?"":t,r=(e.theme,e.size,e.language,e.apiEndpoint),o=void 0===r?"https://gateway.realcatcha.com":r,i=(e.onComplete,(0,a.useState)("initial")),c=i[0],s=i[1],u=(0,a.useState)(""),d=u[0],h=u[1],f=(0,a.useState)(0),p=(f[0],f[1],(0,a.useRef)(null)),g=(0,a.useRef)(null),v=(0,a.useRef)(null),m=(0,a.useRef)({mouseMovements:[],mouseClicks:[],scrollEvents:[],pageEvents:{enterTime:Date.now()}});(0,a.useEffect)(function(){var e=X();return function(){E=[],Object.keys(_).forEach(function(e){_[e]=0});for(var e=parseInt(localStorage.getItem("current_sequence")||"0"),t=1;t<=e;t++)localStorage.removeItem("behavior_data_".concat(t));localStorage.removeItem("current_sequence"),localStorage.removeItem("sequence_counters")}(),"desktop"===e?(window.addEventListener("mousemove",y),window.addEventListener("mousedown",b),window.addEventListener("mouseup",b),window.addEventListener("click",b),window.addEventListener("scroll",x),g.current=setInterval(function(){w(!1)},1e4)):(window.addEventListener("touchstart",$),window.addEventListener("touchmove",Q),window.addEventListener("touchend",Z),g.current=setInterval(function(){ee()},1e4)),function(){"desktop"===e?(window.removeEventListener("mousemove",y),window.removeEventListener("mousedown",b),window.removeEventListener("mouseup",b),window.removeEventListener("click",b),window.removeEventListener("scroll",x),w(!0)):(window.removeEventListener("touchstart",$),window.removeEventListener("touchmove",Q),window.removeEventListener("touchend",Z),ee()),g.current&&clearInterval(g.current)}},[]),(0,a.useEffect)(function(){"image-captcha"!==c&&"abstract-captcha"!==c&&"handwriting-captcha"!==c||(g.current&&(clearInterval(g.current),g.current=null),"desktop"===X()?w(!0):ee())},[c]);var y=function(e){var t={x:e.clientX,y:e.clientY,timestamp:Date.now()};if(!v.current)return m.current.mouseMovements.push(t),void(v.current=t);var n=Math.sqrt(Math.pow(t.x-v.current.x,2)+Math.pow(t.y-v.current.y,2)),r=t.timestamp-v.current.timestamp;(n>=10||r>=50)&&(m.current.mouseMovements.push(t),v.current=t)},b=function(e){m.current.mouseClicks.push({x:e.clientX,y:e.clientY,timestamp:Date.now(),type:e.type})},x=function(){m.current.scrollEvents.push({position:window.scrollY,timestamp:Date.now()})},w=function(e){void 0===e&&(e=!1),C(te(te({},m.current),{pageEvents:te(te({},m.current.pageEvents),{exitTime:e?Date.now():void 0,totalTime:e?Date.now()-m.current.pageEvents.enterTime:void 0})})),e||(m.current=te(te({},m.current),{mouseMovements:[],mouseClicks:[],scrollEvents:[],pageEvents:{enterTime:Date.now()}}))},k=function(e){e.stopPropagation(),e.preventDefault(),"initial"===c?(s("loading"),setTimeout(function(){s("success"),setTimeout(function(){j()},1e3)},2e3)):"error"===c&&(s("initial"),h(""))},S=(0,a.useRef)(!1),j=function(){return ne(void 0,void 0,void 0,function(){var e,t,r,i,a,c,l,u;return re(this,function(d){switch(d.label){case 0:if(d.trys.push([0,3,,4]),S.current)return[2];S.current=!0,e=o||"https://gateway.realcatcha.com",t="undefined"!=typeof performance&&performance.now?performance.now():Date.now(),r=m.current,i={behavior_data:r,site_key:n};try{((null==r?void 0:r.mouseMovements)||[]).length,((null==r?void 0:r.mouseClicks)||[]).length,((null==r?void 0:r.scrollEvents)||[]).length,JSON.stringify(i).length,{mouseMovements:((null==r?void 0:r.mouseMovements)||[]).slice(0,2),mouseClicks:((null==r?void 0:r.mouseClicks)||[]).slice(0,2),scrollEvents:((null==r?void 0:r.scrollEvents)||[]).slice(0,2)}}catch(e){}return[4,fetch("".concat(e,"/api/next-captcha"),{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":n},body:JSON.stringify(i)})];case 1:if(!(a=d.sent()).ok)throw S.current=!1,new Error("HTTP error! status: ".concat(a.status));return[4,a.json()];case 2:c=d.sent(),l="undefined"!=typeof performance&&performance.now?performance.now():Date.now(),u=Math.round(l-t);try{({status:a.status,durationMs:u,next_captcha:null==c?void 0:c.next_captcha,captcha_type:null==c?void 0:c.captcha_type,confidence_score:null==c?void 0:c.confidence_score,ml_service_used:null==c?void 0:c.ml_service_used,is_bot_detected:null==c?void 0:c.is_bot_detected})}catch(e){}return"imagecaptcha"===c.next_captcha?s("image-captcha"):"handwritingcaptcha"===c.next_captcha?s("handwriting-captcha"):"abstractcaptcha"===c.next_captcha?s("abstract-captcha"):s("success"),S.current=!1,[3,4];case 3:return d.sent(),s("error"),h("서버 연결에 실패했습니다. 다시 시도해주세요."),S.current=!1,[3,4];case 4:return[2]}})})},T=function(){j()};return(0,l.jsx)("div",te({className:"captcha-container"},{children:"image-captcha"===c?(0,l.jsx)(D,{onSuccess:T}):"abstract-captcha"===c?(0,l.jsx)(B,{onSuccess:T}):"handwriting-captcha"===c?(0,l.jsx)(K,{onSuccess:T}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",te({className:"captcha-button ".concat(c),onClick:function(e){"initial"===c&&p.current&&!p.current.contains(e.target)&&(e.target.closest(".refresh-button")||(s("error"),h("잘못된 선택입니다. 다시 확인해주세요.")))}},{children:[(0,l.jsxs)("div",te({className:"captcha-left"},{children:["initial"===c&&(0,l.jsx)("div",te({className:"checkbox",ref:p,onClick:k},{children:(0,l.jsx)("div",{className:"checkbox-inner"})})),"loading"===c&&(0,l.jsxs)("div",te({className:"loading-spinner"},{children:[(0,l.jsx)("div",{className:"spinner"}),(0,l.jsx)("span",te({className:"loading-text"},{children:"LOADING..."}))]})),"success"===c&&(0,l.jsx)("div",te({className:"success-check"},{children:(0,l.jsx)("svg",te({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#4CAF50"})}))})),"error"===c&&(0,l.jsx)("div",te({className:"checkbox error",ref:p,onClick:k},{children:(0,l.jsx)("div",{className:"checkbox-inner error"})}))]})),(0,l.jsx)("div",te({className:"captcha-center"},{children:(0,l.jsx)("span",te({className:"captcha-text"},{children:"I'm not a robot"}))})),(0,l.jsx)("div",te({className:"captcha-right"},{children:(0,l.jsx)("button",te({className:"refresh-button",onClick:function(e){e.stopPropagation(),s("initial"),h("")}},{children:(0,l.jsx)("svg",te({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))}))}))]})),"error"===c&&d&&(0,l.jsx)("div",te({className:"error-message"},{children:d}))]})}))};var ie=function(){return ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ie.apply(this,arguments)},ae=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((r=r.apply(e,t||[])).next())})},ce=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},se=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},le=function(){function e(e){if(void 0===e&&(e={}),this.options=ie({siteKey:"",theme:"light",size:"normal",language:"ko",apiEndpoint:"https://api.realcatcha.com"},e),!this.options.siteKey)throw new Error("siteKey is required. Please provide your API key.")}return e.prototype.render=function(e,t){var n=this,r="string"==typeof e?document.getElementById(e):e;if(!r)throw new Error("Container with ID '".concat(e,"' not found"));var o=(0,s.H)(r),i=function(e){t&&"function"==typeof t&&t(e)};return o.render(c().createElement(oe,{onComplete:i,siteKey:this.options.siteKey,theme:this.options.theme,size:this.options.size,language:this.options.language,apiEndpoint:this.options.apiEndpoint})),{destroy:function(){o.unmount()},reset:function(){o.render(c().createElement(oe,{onComplete:i,siteKey:n.options.siteKey,theme:n.options.theme,size:n.options.size,language:n.options.language,apiEndpoint:n.options.apiEndpoint,key:Date.now()}))}}},e.prototype.configure=function(e){this.options=ie(ie({},this.options),e)},e}();"undefined"!=typeof window&&function(){ae(this,void 0,void 0,function(){var e;return ce(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,new Promise(function(e){var t=function(){window.React&&window.ReactDOM&&window.ReactDOM.createRoot?e():setTimeout(t,50)};t()})];case 1:return t.sent(),window.RealCaptcha=le,window.createRealCaptcha=function(e){return new le(e)},window.renderRealCaptcha=function(e,t,n){return new le(t).render(e,n)},window.REAL={init:function(e){var t=e.container,n=e.siteKey,r=e.callback,o=e["expired-callback"],i=se(e,["container","siteKey","callback","expired-callback"]);if(!n)throw new Error("siteKey is required");if(!t)throw new Error("container is required");var a=new le(ie({siteKey:n},i)).render(t,r);return o&&(a.onExpired=o),a},reset:function(){window.__REAL_CURRENT_INSTANCE__&&window.__REAL_CURRENT_INSTANCE__.reset()}},window.__REAL_PENDING_INIT__&&(e=window.__REAL_PENDING_INIT__,delete window.__REAL_PENDING_INIT__,window.REAL.init(e)),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}})})}();const ue=le;return i})());