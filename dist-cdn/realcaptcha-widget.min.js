!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["React","ReactDOM"],t):"object"==typeof exports?exports.RealCaptcha=t(require("react"),require("react-dom")):e.RealCaptcha=t(e.React,e.ReactDOM)}(this,(e,t)=>(()=>{"use strict";var n={20:(e,t,n)=>{var r=n(156),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,d=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:d,props:o,_owner:a.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},29:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(601),i=n.n(r),o=n(314),s=n.n(o)()(i());s.push([e.id,".warm-feeling-captcha {\n  width: 400px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.captcha-header {\n  background-color: #f5f5f5;\n  padding: 16px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.header-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n  text-align: center;\n  display: block;\n}\n\n.image-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 2.5px;\n  background-color: #e0e0e0;\n  padding: 2.5px;\n}\n\n.image-item {\n  position: relative;\n  aspect-ratio: 1;\n  background-color: #ffffff;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.image-item:hover {\n  background-color: #f8f9fa;\n}\n\n.image-item.selected {\n  background-color: #e3f2fd;\n}\n\n.image-placeholder {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n\n.placeholder-content {\n  font-size: 24px;\n  color: #666;\n}\n\n.image-placeholder img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.selection-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(66, 133, 244, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 2px;\n}\n\n.captcha-controls {\n  background-color: #f5f5f5;\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #e0e0e0;\n}\n\n.control-left {\n  display: flex;\n  gap: 8px;\n}\n\n.control-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.control-button:hover {\n  background-color: #e0e0e0;\n}\n\n.verify-button {\n  background-color: #f5f5f5;\n  color: #999;\n  border: 1px solid #e0e0e0;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: not-allowed;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.verify-button.active {\n  background-color: #4285f4;\n  color: #ffffff;\n  border-color: #4285f4;\n  cursor: pointer;\n}\n\n.verify-button.active:hover {\n  background-color: #3367d6;\n} ",""]);const a=s},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},s=[],a=0;a<e.length;a++){var c=e[a],l=r.base?c[0]+r.base:c[0],d=o[l]||0,u="".concat(l," ").concat(d);o[l]=d+1;var h=n(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=i(p,r);r.byIndex=a,t.splice(a,0,{identifier:u,updater:f,references:1})}s.push(u)}return s}function i(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var s=0;s<o.length;s++){var a=n(o[s]);t[a].references--}for(var c=r(e,i),l=0;l<o.length;l++){var d=n(o[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}o=c}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},132:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(601),i=n.n(r),o=n(314),s=n.n(o)()(i());s.push([e.id,".captcha-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.captcha-button {\n  display: flex;\n  align-items: center;\n  width: 320px;\n  height: 60px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  padding: 0 16px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n\n.captcha-button:hover {\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n}\n\n.captcha-left {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  margin-right: 12px;\n}\n\n.checkbox {\n  width: 20px;\n  height: 20px;\n  border: 2px solid #ccc;\n  border-radius: 2px;\n  background-color: #ffffff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  cursor: pointer;\n  user-select: none;\n}\n\n.checkbox.error {\n  border-color: #f44336;\n}\n\n.checkbox-inner {\n  width: 12px;\n  height: 12px;\n  background-color: transparent;\n  border-radius: 1px;\n  transition: all 0.2s ease;\n}\n\n.checkbox-inner.error {\n  background-color: transparent;\n}\n\n.loading-spinner {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n}\n\n.spinner {\n  width: 20px;\n  height: 20px;\n  border: 2px solid #e0e0e0;\n  border-top: 2px solid #4285f4;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.loading-text {\n  font-size: 10px;\n  color: #4285f4;\n  font-weight: 500;\n}\n\n.success-check {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n}\n\n.captcha-center {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.captcha-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n}\n\n.captcha-right {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  margin-left: 12px;\n}\n\n.refresh-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 50%;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.refresh-button:hover {\n  background-color: #f5f5f5;\n}\n\n.error-message {\n  color: #f44336;\n  font-size: 12px;\n  font-weight: 500;\n  text-align: center;\n  margin-top: 4px;\n}\n\n/* 상태별 스타일 */\n.captcha-button.loading {\n  background-color: #f8f9fa;\n}\n\n.captcha-button.success {\n  background-color: #f1f8e9;\n  border-color: #4caf50;\n}\n\n.captcha-button.error {\n  background-color: #ffebee;\n  border-color: #f44336;\n} ",""]);const a=s},156:t=>{t.exports=e},299:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(601),i=n.n(r),o=n(314),s=n.n(o)()(i());s.push([e.id,".image-captcha {\n  width: 400px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.captcha-header {\n  background-color: #f5f5f5;\n  padding: 16px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.header-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n  text-align: center;\n  display: block;\n}\n\n.image-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 2.5px;\n  background-color: #e0e0e0;\n  padding: 2.5px;\n}\n\n.image-item {\n  position: relative;\n  aspect-ratio: 1;\n  background-color: #ffffff;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.image-item:hover {\n  background-color: #f8f9fa;\n}\n\n.image-item.selected {\n  background-color: #e3f2fd;\n}\n\n.image-placeholder {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  background-repeat: no-repeat;\n  background-size: 300% 300%;\n}\n\n.selection-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(66, 133, 244, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 2px;\n}\n\n.captcha-controls {\n  background-color: #f5f5f5;\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #e0e0e0;\n}\n\n.control-left {\n  display: flex;\n  gap: 8px;\n}\n\n.control-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.control-button:hover {\n  background-color: #e0e0e0;\n}\n\n.verify-button {\n  background-color: #f5f5f5;\n  color: #999;\n  border: 1px solid #e0e0e0;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: not-allowed;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.verify-button.active {\n  background-color: #4285f4;\n  color: #ffffff;\n  border-color: #4285f4;\n  cursor: pointer;\n}\n\n.verify-button.active:hover {\n  background-color: #3367d6;\n} ",""]);const a=s},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&s[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},318:e=>{e.exports=t},338:(e,t,n)=>{var r=n(318);t.H=r.createRoot,r.hydrateRoot},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},569:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(601),i=n.n(r),o=n(314),s=n.n(o)()(i());s.push([e.id,".handwriting-captcha {\n  width: 500px;\n  background-color: #ffffff;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.captcha-header {\n  background-color: #f5f5f5;\n  padding: 16px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.header-text {\n  font-size: 14px;\n  color: #333333;\n  font-weight: 500;\n  text-align: center;\n  display: block;\n}\n\n.images-container {\n  display: flex;\n  gap: 8px;\n  padding: 16px;\n  background-color: #ffffff;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.image-slot {\n  flex: 1;\n  aspect-ratio: 1;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.image-slot img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.handwriting-area {\n  padding: 16px;\n  background-color: #ffffff;\n}\n\n.grid-pattern {\n  width: 100%;\n  height: 200px;\n  background-image: \n    linear-gradient(rgba(200, 200, 200, 0.3) 1px, transparent 1px),\n    linear-gradient(90deg, rgba(200, 200, 200, 0.3) 1px, transparent 1px);\n  background-size: 20px 20px;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  position: relative;\n}\n\n.drawing-canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  cursor: crosshair;\n  background-color: transparent;\n}\n\n.captcha-controls {\n  background-color: #f5f5f5;\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #e0e0e0;\n}\n\n.control-left {\n  display: flex;\n  gap: 8px;\n}\n\n.control-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.control-button:hover {\n  background-color: #e0e0e0;\n}\n\n.control-button.disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.control-button.disabled:hover {\n  background-color: transparent;\n}\n\n.verify-button {\n  background-color: #4285f4;\n  color: #ffffff;\n  border: 1px solid #4285f4;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.verify-button:hover {\n  background-color: #3367d6;\n} ",""]);const a=s},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},848:(e,t,n)=>{e.exports=n(20)}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={id:e,exports:{}};return n[e](o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nc=void 0;var o={};i.r(o),i.d(o,{RealCaptcha:()=>q,default:()=>Y});var s=i(156),a=i.n(s),c=i(338),l=i(848),d=i(72),u=i.n(d),h=i(825),p=i.n(h),f=i(659),g=i.n(f),m=i(56),v=i.n(m),x=i(540),b=i.n(x),k=i(113),y=i.n(k),w=i(132),j={};j.styleTagTransform=y(),j.setAttributes=v(),j.insert=g().bind(null,"head"),j.domAPI=p(),j.insertStyleElement=b();u()(w.A,j);w.A&&w.A.locals&&w.A.locals;var S=i(299),T={};T.styleTagTransform=y(),T.setAttributes=v(),T.insert=g().bind(null,"head"),T.domAPI=p(),T.insertStyleElement=b();u()(S.A,T);S.A&&S.A.locals&&S.A.locals;const M=function(){function e(){this.isTracking=!1,this.lastGridPosition=null,this.lastMousePosition=null,this.metrics={sessionId:"session_".concat(Date.now()),startTime:Date.now(),endTime:0,totalTime:0,imageInteractions:{},selectionOrder:[],deselectionOrder:[],finalSelection:[],mouseTrajectory:[],gridMovements:[],refreshCount:0,verifyAttempts:0,verificationSuccess:!1,attemptDuration:0};for(var e=1;e<=9;e++)this.metrics.imageInteractions[e]={imageId:e,gridPosition:{row:Math.ceil(e/3),col:(e-1)%3+1},clicks:[],hovers:[],totalHoverTime:0,isSelected:!1}}return e.prototype.startTracking=function(){this.isTracking=!0,this.metrics.startTime=Date.now()},e.prototype.stopTracking=function(){this.isTracking=!1,this.metrics.endTime=Date.now(),this.metrics.totalTime=this.metrics.endTime-this.metrics.startTime,this.saveToLocalStorage()},e.prototype.trackMouseMove=function(e,t){if(this.isTracking){var n=Date.now(),r={x:e,y:t,timestamp:n};this.metrics.mouseTrajectory.push(r);var i=this.calculateGridPosition(e,t);i&&this.lastGridPosition&&(i.row===this.lastGridPosition.row&&i.col===this.lastGridPosition.col||this.metrics.gridMovements.push({from:this.lastGridPosition,to:i,timestamp:n})),this.lastGridPosition=i,this.lastMousePosition=r}},e.prototype.trackImageSelection=function(e,t){if(this.isTracking){var n=this.metrics.imageInteractions[e];n&&(n.isSelected=t,t?this.metrics.selectionOrder.push(e):this.metrics.deselectionOrder.push(e),this.lastMousePosition&&n.clicks.push(this.lastMousePosition))}},e.prototype.trackImageHover=function(e,t){if(this.isTracking){var n=this.metrics.imageInteractions[e];if(n){var r=Date.now();if(t)n.hovers.push({enter:r,leave:0});else{var i=n.hovers[n.hovers.length-1];i&&0===i.leave&&(i.leave=r,n.totalHoverTime+=r-i.enter)}}}},e.prototype.trackRefresh=function(){this.isTracking&&this.metrics.refreshCount++},e.prototype.trackVerifyAttempt=function(e){this.isTracking&&(this.metrics.verifyAttempts++,this.metrics.verificationSuccess=e,this.metrics.attemptDuration=Date.now()-this.metrics.startTime,this.metrics.finalSelection=Object.entries(this.metrics.imageInteractions).filter(function(e){e[0];return e[1].isSelected}).map(function(e){var t=e[0];return parseInt(t)}),this.saveToLocalStorage())},e.prototype.calculateGridPosition=function(e,t){var n=Math.ceil(t/33.33),r=Math.ceil(e/33.33);return n>=1&&n<=3&&r>=1&&r<=3?{row:n,col:r}:null},e.prototype.saveToLocalStorage=function(){try{var e="image_behavior_".concat(this.metrics.sessionId);localStorage.setItem(e,JSON.stringify(this.metrics));var t=JSON.parse(localStorage.getItem("image_captcha_sessions")||"[]");t.includes(e)||(t.push(e),localStorage.setItem("image_captcha_sessions",JSON.stringify(t)))}catch(e){}},e.prototype.downloadMetrics=function(){var e=JSON.stringify(this.metrics,null,2),t=new Blob([e],{type:"application/json"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="image_behavior_".concat(Date.now(),".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},e}();var N=function(){return N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},N.apply(this,arguments)},C=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};const I=function(e){var t=e.onSuccess,n=(0,s.useState)([]),r=n[0],i=n[1],o=(0,s.useState)(!1),a=(o[0],o[1]),c=(0,s.useRef)(new M);(0,s.useEffect)(function(){return c.current.startTracking(),function(){c.current.stopTracking()}},[]);var d=[{id:1,hasBike:!1,selected:!1,gridPosition:{row:1,col:1}},{id:2,hasBike:!1,selected:!1,gridPosition:{row:1,col:2}},{id:3,hasBike:!0,selected:!1,gridPosition:{row:1,col:3}},{id:4,hasBike:!1,selected:!1,gridPosition:{row:2,col:1}},{id:5,hasBike:!1,selected:!1,gridPosition:{row:2,col:2}},{id:6,hasBike:!0,selected:!1,gridPosition:{row:2,col:3}},{id:7,hasBike:!1,selected:!1,gridPosition:{row:3,col:1}},{id:8,hasBike:!1,selected:!1,gridPosition:{row:3,col:2}},{id:9,hasBike:!0,selected:!1,gridPosition:{row:3,col:3}}];return(0,l.jsxs)("div",N({className:"image-captcha",onMouseMove:function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;c.current.trackMouseMove(n,r)}},{children:[(0,l.jsx)("div",N({className:"captcha-header"},{children:(0,l.jsx)("span",N({className:"header-text"},{children:"Select all images with a bike."}))})),(0,l.jsx)("div",N({className:"image-grid"},{children:d.map(function(e){return(0,l.jsx)("div",N({className:"image-item ".concat(r.includes(e.id)?"selected":""),onClick:function(){return t=e.id,n=r.includes(t),i(function(e){return n?e.filter(function(e){return e!==t}):C(C([],e,!0),[t],!1)}),void c.current.trackImageSelection(t,!n);var t,n},onMouseEnter:function(){return c.current.trackImageHover(e.id,!0)},onMouseLeave:function(){return c.current.trackImageHover(e.id,!1)}},{children:(0,l.jsx)("div",N({className:"image-placeholder",style:{backgroundImage:"url(https://picsum.photos/450/450?random=bike)",backgroundPosition:"".concat(33.33*(e.gridPosition.col-1),"% ").concat(33.33*(e.gridPosition.row-1),"%"),backgroundSize:"300% 300%"}},{children:r.includes(e.id)&&(0,l.jsx)("div",N({className:"selection-overlay"},{children:(0,l.jsx)("svg",N({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#ffffff"})}))}))}))}),e.id)})})),(0,l.jsxs)("div",N({className:"captcha-controls"},{children:[(0,l.jsxs)("div",N({className:"control-left"},{children:[(0,l.jsx)("button",N({className:"control-button",onClick:function(){i([]),a(!1),c.current.trackRefresh()}},{children:(0,l.jsx)("svg",N({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))})),(0,l.jsx)("button",N({className:"control-button"},{children:(0,l.jsx)("svg",N({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z",fill:"#666"})}))})),(0,l.jsx)("button",N({className:"control-button"},{children:(0,l.jsxs)("svg",N({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"#666",strokeWidth:"2",fill:"none"}),(0,l.jsx)("path",{d:"M12 16v-4M12 8h.01",stroke:"#666",strokeWidth:"2",fill:"none"})]}))}))]})),(0,l.jsx)("button",N({className:"verify-button ".concat(r.length>0?"active":""),onClick:function(){var e=r.filter(function(e){var t=d.find(function(t){return t.id===e});return null==t?void 0:t.hasBike}),n=r.filter(function(e){var t=d.find(function(t){return t.id===e});return t&&!t.hasBike}),o=3===e.length&&0===n.length;c.current.trackVerifyAttempt(o),c.current.downloadMetrics(),o?(a(!0),setTimeout(function(){null==t||t()},1e3)):i([])},disabled:0===r.length},{children:"VERIFY"}))]}))]}))};var E=i(29),L={};L.styleTagTransform=y(),L.setAttributes=v(),L.insert=g().bind(null,"head"),L.domAPI=p(),L.insertStyleElement=b();u()(E.A,L);E.A&&E.A.locals&&E.A.locals;var P=function(){return P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},P.apply(this,arguments)},O=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};const A=function(e){var t=e.onSuccess,n=(0,s.useState)([]),r=n[0],i=n[1],o=(0,s.useState)(!1),a=(o[0],o[1]),c=[{id:1,src:"https://picsum.photos/150/150?random=1",hasWarmFeeling:!0,selected:!1},{id:2,src:"https://picsum.photos/150/150?random=2",hasWarmFeeling:!0,selected:!1},{id:3,src:"https://picsum.photos/150/150?random=3",hasWarmFeeling:!0,selected:!1},{id:4,src:"https://picsum.photos/150/150?random=4",hasWarmFeeling:!1,selected:!1},{id:5,src:"https://picsum.photos/150/150?random=5",hasWarmFeeling:!1,selected:!1},{id:6,src:"https://picsum.photos/150/150?random=6",hasWarmFeeling:!1,selected:!1},{id:7,src:"https://picsum.photos/150/150?random=7",hasWarmFeeling:!0,selected:!1},{id:8,src:"https://picsum.photos/150/150?random=8",hasWarmFeeling:!1,selected:!1},{id:9,src:"https://picsum.photos/150/150?random=9",hasWarmFeeling:!0,selected:!1}];return(0,l.jsxs)("div",P({className:"warm-feeling-captcha"},{children:[(0,l.jsx)("div",P({className:"captcha-header"},{children:(0,l.jsx)("span",P({className:"header-text"},{children:"Select all images with a warm feeling."}))})),(0,l.jsx)("div",P({className:"image-grid"},{children:c.map(function(e){return(0,l.jsxs)("div",P({className:"image-item ".concat(r.includes(e.id)?"selected":""),onClick:function(){return t=e.id,void i(function(e){return e.includes(t)?e.filter(function(e){return e!==t}):O(O([],e,!0),[t],!1)});var t}},{children:[(0,l.jsx)("div",P({className:"image-placeholder"},{children:(0,l.jsx)("img",{src:e.src,alt:"Image ".concat(e.id)})})),r.includes(e.id)&&(0,l.jsx)("div",P({className:"selection-overlay"},{children:(0,l.jsx)("svg",P({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#ffffff"})}))}))]}),e.id)})})),(0,l.jsxs)("div",P({className:"captcha-controls"},{children:[(0,l.jsxs)("div",P({className:"control-left"},{children:[(0,l.jsx)("button",P({className:"control-button",onClick:function(){i([]),a(!1)}},{children:(0,l.jsx)("svg",P({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))})),(0,l.jsx)("button",P({className:"control-button"},{children:(0,l.jsx)("svg",P({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z",fill:"#666"})}))})),(0,l.jsx)("button",P({className:"control-button"},{children:(0,l.jsxs)("svg",P({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"#666",strokeWidth:"2",fill:"none"}),(0,l.jsx)("path",{d:"M12 16v-4M12 8h.01",stroke:"#666",strokeWidth:"2",fill:"none"})]}))}))]})),(0,l.jsx)("button",P({className:"verify-button ".concat(r.length>0?"active":""),onClick:function(){var e=r.filter(function(e){var t=c.find(function(t){return t.id===e});return null==t?void 0:t.hasWarmFeeling}),n=r.filter(function(e){var t=c.find(function(t){return t.id===e});return t&&!t.hasWarmFeeling});5===e.length&&0===n.length?(a(!0),setTimeout(function(){null==t||t()},1e3)):i([])},disabled:0===r.length},{children:"VERIFY"}))]}))]}))};var D=i(569),_={};_.styleTagTransform=y(),_.setAttributes=v(),_.insert=g().bind(null,"head"),_.domAPI=p(),_.insertStyleElement=b();u()(D.A,_);D.A&&D.A.locals&&D.A.locals;const R=function(){function e(){this.isTracking=!1,this.currentStroke=[],this.lastStrokeEnd=0,this.metrics={strokeCount:0,strokeLengths:[],strokeDurations:[],strokeIntervals:[],strokeCurvatures:[],strokeJitters:[],directionChanges:[],hesitationPoints:[],totalTime:0,averageSpeed:0,speedVariations:[],sessionId:"session_".concat(Date.now()),startTime:Date.now(),endTime:0,verificationSuccess:!1}}return e.prototype.startTracking=function(){this.isTracking=!0,this.metrics.startTime=Date.now()},e.prototype.stopTracking=function(){this.isTracking&&(this.isTracking=!1,this.metrics.endTime=Date.now(),this.metrics.totalTime=this.metrics.endTime-this.metrics.startTime,this.saveToLocalStorage())},e.prototype.startStroke=function(e,t){if(this.isTracking){var n=Date.now(),r={x:e,y:t,timestamp:n};this.currentStroke=[r],this.lastStrokeEnd>0&&this.metrics.strokeIntervals.push(n-this.lastStrokeEnd)}},e.prototype.addPoint=function(e,t){if(this.isTracking&&0!==this.currentStroke.length){var n={x:e,y:t,timestamp:Date.now()};this.currentStroke.push(n),this.updateMetrics()}},e.prototype.endStroke=function(){if(this.isTracking&&!(this.currentStroke.length<2)){this.metrics.strokeCount++,this.lastStrokeEnd=Date.now();var e=this.calculateStrokeLength(),t=this.currentStroke[this.currentStroke.length-1].timestamp-this.currentStroke[0].timestamp,n=this.calculateCurvature(),r=this.calculateJitter(),i=this.calculateDirectionChanges(),o=this.calculateHesitations();this.metrics.strokeLengths.push(e),this.metrics.strokeDurations.push(t),this.metrics.strokeCurvatures.push(n),this.metrics.strokeJitters.push(r),this.metrics.directionChanges.push(i),this.metrics.hesitationPoints.push(o);var s=e/t;this.metrics.speedVariations.push(s),this.updateAverages(),this.currentStroke=[]}},e.prototype.calculateStrokeLength=function(){for(var e=0,t=1;t<this.currentStroke.length;t++){var n=this.currentStroke[t].x-this.currentStroke[t-1].x,r=this.currentStroke[t].y-this.currentStroke[t-1].y;e+=Math.sqrt(n*n+r*r)}return e},e.prototype.calculateCurvature=function(){if(this.currentStroke.length<3)return 0;for(var e=0,t=1;t<this.currentStroke.length-1;t++){var n=this.currentStroke[t-1],r=this.currentStroke[t],i=this.currentStroke[t+1],o=Math.atan2(r.y-n.y,r.x-n.x),s=Math.atan2(i.y-r.y,i.x-r.x);e+=Math.abs(s-o)}return e/(this.currentStroke.length-2)},e.prototype.calculateJitter=function(){if(this.currentStroke.length<3)return 0;for(var e=0,t=1;t<this.currentStroke.length-1;t++){var n={x:(this.currentStroke[t-1].x+this.currentStroke[t+1].x)/2,y:(this.currentStroke[t-1].y+this.currentStroke[t+1].y)/2},r=this.currentStroke[t];e+=Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2))}return e/(this.currentStroke.length-2)},e.prototype.calculateDirectionChanges=function(){if(this.currentStroke.length<3)return 0;for(var e=0,t=Math.atan2(this.currentStroke[1].y-this.currentStroke[0].y,this.currentStroke[1].x-this.currentStroke[0].x),n=2;n<this.currentStroke.length;n++){var r=Math.atan2(this.currentStroke[n].y-this.currentStroke[n-1].y,this.currentStroke[n].x-this.currentStroke[n-1].x);Math.abs(r-t)>Math.PI/4&&e++,t=r}return e},e.prototype.calculateHesitations=function(){if(this.currentStroke.length<2)return 0;for(var e=0,t=1;t<this.currentStroke.length;t++){var n=this.currentStroke[t].timestamp-this.currentStroke[t-1].timestamp,r=this.currentStroke[t].x-this.currentStroke[t-1].x,i=this.currentStroke[t].y-this.currentStroke[t-1].y;Math.sqrt(r*r+i*i)/n<.1&&e++}return e},e.prototype.updateAverages=function(){var e=this.metrics.strokeLengths.reduce(function(e,t){return e+t},0),t=this.metrics.strokeDurations.reduce(function(e,t){return e+t},0);this.metrics.averageSpeed=e/t},e.prototype.updateMetrics=function(){if(this.currentStroke.length>=2){var e=this.currentStroke[this.currentStroke.length-1],t=this.currentStroke[this.currentStroke.length-2],n=e.timestamp-t.timestamp,r=e.x-t.x,i=e.y-t.y,o=Math.sqrt(r*r+i*i)/n;this.metrics.speedVariations.push(o)}},e.prototype.setVerificationResult=function(e){this.metrics.verificationSuccess=e,this.saveToLocalStorage()},e.prototype.saveToLocalStorage=function(){try{var e="handwriting_behavior_".concat(this.metrics.sessionId);localStorage.setItem(e,JSON.stringify(this.metrics))}catch(e){}},e.prototype.downloadMetrics=function(){var e=JSON.stringify(this.metrics,null,2),t=new Blob([e],{type:"application/json"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="handwriting_behavior_".concat(Date.now(),".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},e.prototype.reset=function(){this.currentStroke=[],this.metrics={strokeCount:0,strokeLengths:[],strokeDurations:[],strokeIntervals:[],strokeCurvatures:[],strokeJitters:[],directionChanges:[],hesitationPoints:[],totalTime:0,averageSpeed:0,speedVariations:[],sessionId:"session_".concat(Date.now()),startTime:Date.now(),endTime:0,verificationSuccess:!1},this.lastStrokeEnd=0,this.isTracking=!0},e}();var B=function(){return B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},B.apply(this,arguments)},z=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};const W=function(e){var t=e.onSuccess,n=(0,s.useState)(!1),r=n[0],i=n[1],o=(0,s.useState)(""),a=(o[0],o[1],(0,s.useState)("")),c=(a[0],a[1]),d=(0,s.useState)([]),u=d[0],h=d[1],p=(0,s.useRef)(null),f=(0,s.useRef)(null),g=(0,s.useRef)(new R);(0,s.useEffect)(function(){var e=p.current;if(e){e.width=2*e.offsetWidth,e.height=2*e.offsetHeight,e.style.width="".concat(e.offsetWidth,"px"),e.style.height="".concat(e.offsetHeight,"px");var t=e.getContext("2d");if(t)return t.scale(2,2),t.lineCap="round",t.strokeStyle="#000000",t.lineWidth=2,f.current=t,g.current.startTracking(),function(){g.current.stopTracking()}}},[]);var m=function(){var e;i(!1),null===(e=f.current)||void 0===e||e.closePath(),g.current.endStroke()};return(0,l.jsxs)("div",B({className:"handwriting-captcha"},{children:[(0,l.jsx)("div",B({className:"captcha-header"},{children:(0,l.jsx)("span",B({className:"header-text"},{children:"Look at the images and write the keywords that come to mind by hand."}))})),(0,l.jsx)("div",B({className:"images-container"},{children:[{id:1,src:"/4.jpg",alt:"Kingfisher bird"},{id:2,src:"/5.jpg",alt:"Mountain landscape"},{id:3,src:"/6.jpg",alt:"Person on bicycle"},{id:4,src:"/7.jpg",alt:"Kingfisher bird duplicate"},{id:5,src:"/8.jpg",alt:"Mountain landscape duplicate"}].map(function(e){return(0,l.jsx)("div",B({className:"image-slot"},{children:(0,l.jsx)("img",{src:e.src,alt:e.alt})}),e.id)})})),(0,l.jsx)("div",B({className:"handwriting-area"},{children:(0,l.jsx)("div",B({className:"grid-pattern"},{children:(0,l.jsx)("canvas",{ref:p,className:"drawing-canvas",onMouseDown:function(e){var t,n;i(!0);var r=e.nativeEvent,o=r.offsetX,s=r.offsetY;null===(t=f.current)||void 0===t||t.beginPath(),null===(n=f.current)||void 0===n||n.moveTo(o,s),g.current.startStroke(o,s);var a=p.current;if(a&&f.current){var c=f.current.getImageData(0,0,a.width,a.height);h(function(e){return z(z([],e,!0),[c],!1)})}},onMouseMove:function(e){var t,n;if(r){var i=e.nativeEvent,o=i.offsetX,s=i.offsetY;null===(t=f.current)||void 0===t||t.lineTo(o,s),null===(n=f.current)||void 0===n||n.stroke(),g.current.addPoint(o,s)}},onMouseUp:m,onMouseLeave:m})}))})),(0,l.jsxs)("div",B({className:"captcha-controls"},{children:[(0,l.jsxs)("div",B({className:"control-left"},{children:[(0,l.jsx)("button",B({className:"control-button",onClick:function(){!function(){var e=p.current;if(e){var t=e.getContext("2d");t&&(t.clearRect(0,0,e.width,e.height),h([]),g.current.reset())}}(),c("")}},{children:(0,l.jsx)("svg",B({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))})),(0,l.jsx)("button",B({className:"control-button ".concat(0===u.length?"disabled":""),onClick:function(){if(0!==u.length){var e=p.current;if(e&&f.current){var t=u.slice(0,-1);if(h(t),f.current.clearRect(0,0,e.width,e.height),t.length>0){var n=t[t.length-1];f.current.putImageData(n,0,0)}}}},disabled:0===u.length},{children:(0,l.jsx)("svg",B({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z",fill:0===u.length?"#ccc":"#666"})}))})),(0,l.jsx)("button",B({className:"control-button"},{children:(0,l.jsx)("svg",B({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z",fill:"#666"})}))})),(0,l.jsx)("button",B({className:"control-button"},{children:(0,l.jsxs)("svg",B({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"#666",strokeWidth:"2",fill:"none"}),(0,l.jsx)("path",{d:"M12 16v-4M12 8h.01",stroke:"#666",strokeWidth:"2",fill:"none"})]}))}))]})),(0,l.jsx)("button",B({className:"verify-button active",onClick:function(){var e=u.length>0;g.current.setVerificationResult(e),g.current.downloadMetrics(),e?null==t||t():alert("키워드를 입력해주세요.")}},{children:"VERIFY"}))]}))]}))};var V=function(){return V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},V.apply(this,arguments)},F="captcha_session_sequence",U=function(){return"session".concat((e=parseInt(sessionStorage.getItem(F)||"0")+1,sessionStorage.setItem(F,e.toString()),e));var e};const J=function(){var e=(0,s.useState)("initial"),t=e[0],n=e[1],r=(0,s.useState)(""),i=r[0],o=r[1],a=(0,s.useState)(0),c=(a[0],a[1]),d=(0,s.useRef)(null),u=(0,s.useRef)(null),h=(0,s.useRef)(null),p=(0,s.useRef)({mouseMovements:[],mouseClicks:[],scrollEvents:[],pageEvents:{enterTime:Date.now()},sessionId:U(),userAgent:window.navigator.userAgent,screenResolution:{width:window.screen.width,height:window.screen.height}});(0,s.useEffect)(function(){return Object.keys(localStorage).filter(function(e){return e.startsWith("captcha_behavior_")||e.startsWith("image_behavior_")||e.startsWith("warm_feeling_behavior_")||e.startsWith("handwriting_behavior_")}).forEach(function(e){return localStorage.removeItem(e)}),sessionStorage.removeItem(F),window.addEventListener("mousemove",f),window.addEventListener("mousedown",g),window.addEventListener("mouseup",g),window.addEventListener("click",g),window.addEventListener("scroll",m),u.current=setInterval(function(){v(!1)},1e4),function(){window.removeEventListener("mousemove",f),window.removeEventListener("mousedown",g),window.removeEventListener("mouseup",g),window.removeEventListener("click",g),window.removeEventListener("scroll",m),u.current&&clearInterval(u.current),v(!0)}},[]),(0,s.useEffect)(function(){"image-captcha"!==t&&"warm-feeling-captcha"!==t&&"handwriting-captcha"!==t||(u.current&&(clearInterval(u.current),u.current=null),v(!0))},[t]);var f=function(e){var t={x:e.clientX,y:e.clientY,timestamp:Date.now()};if(!h.current)return p.current.mouseMovements.push(t),void(h.current=t);var n=Math.sqrt(Math.pow(t.x-h.current.x,2)+Math.pow(t.y-h.current.y,2)),r=t.timestamp-h.current.timestamp;(n>=10||r>=50)&&(p.current.mouseMovements.push(t),h.current=t)},g=function(e){p.current.mouseClicks.push({x:e.clientX,y:e.clientY,timestamp:Date.now(),type:e.type})},m=function(){p.current.scrollEvents.push({position:window.scrollY,timestamp:Date.now()})},v=function(e){void 0===e&&(e=!1);try{var t=V(V({},p.current),{pageEvents:V(V({},p.current.pageEvents),{exitTime:Date.now(),totalTime:Date.now()-p.current.pageEvents.enterTime})}),n="captcha_behavior_".concat(t.sessionId);if(localStorage.setItem(n,JSON.stringify(t)),e){var r=Object.keys(localStorage).filter(function(e){return e.startsWith("captcha_behavior_")}).map(function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null}).filter(Boolean),i="\n// Captcha Behavior Data\nconst behaviorData = ".concat(JSON.stringify(r,null,2),";\n\n// 데이터 분석을 위한 유틸리티 함수들\nconst utils = {\n  // 총 마우스 이동 거리\n  getTotalMouseDistance() {\n    return behaviorData.reduce((total, session) => {\n      let sessionTotal = 0;\n      const movements = session.mouseMovements;\n      for (let i = 1; i < movements.length; i++) {\n        const dx = movements[i].x - movements[i-1].x;\n        const dy = movements[i].y - movements[i-1].y;\n        sessionTotal += Math.sqrt(dx * dx + dy * dy);\n      }\n      return total + sessionTotal;\n    }, 0);\n  },\n\n  // 클릭 분석\n  getClickAnalysis() {\n    return behaviorData.map(session => ({\n      sessionId: session.sessionId,\n      totalClicks: session.mouseClicks.length,\n      clickTypes: session.mouseClicks.reduce((acc, click) => {\n        acc[click.type] = (acc[click.type] || 0) + 1;\n        return acc;\n      }, {}),\n      clickPattern: session.mouseClicks.map(click => ({\n        type: click.type,\n        position: { x: click.x, y: click.y },\n        timestamp: click.timestamp\n      }))\n    }));\n  },\n\n  // 스크롤 분석\n  getScrollAnalysis() {\n    return behaviorData.map(session => ({\n      sessionId: session.sessionId,\n      totalScrolls: session.scrollEvents.length,\n      maxScroll: Math.max(...session.scrollEvents.map(e => e.position)),\n      scrollPattern: session.scrollEvents.map(e => ({\n        position: e.position,\n        timestamp: e.timestamp\n      }))\n    }));\n  },\n\n  // 세션 시간 분석\n  getTimeAnalysis() {\n    return behaviorData.map(session => ({\n      sessionId: session.sessionId,\n      totalTime: session.pageEvents.totalTime,\n      startTime: session.pageEvents.enterTime,\n      endTime: session.pageEvents.exitTime\n    }));\n  }\n};\n\n// 데이터 내보내기\nmodule.exports = {\n  behaviorData,\n  utils\n};"),o=new Blob([i],{type:"application/javascript"}),s=window.URL.createObjectURL(o),a=document.createElement("a");a.href=s,a.download="".concat(t.sessionId,".js"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),Object.keys(localStorage).filter(function(e){return e.startsWith("captcha_behavior_")}).forEach(function(e){return localStorage.removeItem(e)})}p.current={mouseMovements:[],mouseClicks:[],scrollEvents:[],pageEvents:{enterTime:Date.now()},sessionId:U(),userAgent:window.navigator.userAgent,screenResolution:{width:window.screen.width,height:window.screen.height}}}catch(e){}},x=function(e){e.stopPropagation(),e.preventDefault(),"initial"===t?(n("loading"),setTimeout(function(){Math.random()>.5?(n("success"),setTimeout(function(){c(function(e){var t=e+1;return n(t%3==0?"image-captcha":t%3==1?"warm-feeling-captcha":"handwriting-captcha"),t})},1e3)):(n("error"),o("잘못된 선택입니다. 다시 확인해주세요."))},2e3)):"error"===t&&(n("initial"),o(""))},b=function(){n("initial")};return(0,l.jsx)("div",V({className:"captcha-container"},{children:"image-captcha"===t?(0,l.jsx)(I,{onSuccess:b}):"warm-feeling-captcha"===t?(0,l.jsx)(A,{onSuccess:b}):"handwriting-captcha"===t?(0,l.jsx)(W,{onSuccess:b}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",V({className:"captcha-button ".concat(t),onClick:function(e){"initial"===t&&d.current&&!d.current.contains(e.target)&&(e.target.closest(".refresh-button")||(n("error"),o("잘못된 선택입니다. 다시 확인해주세요.")))}},{children:[(0,l.jsxs)("div",V({className:"captcha-left"},{children:["initial"===t&&(0,l.jsx)("div",V({className:"checkbox",ref:d,onClick:x},{children:(0,l.jsx)("div",{className:"checkbox-inner"})})),"loading"===t&&(0,l.jsxs)("div",V({className:"loading-spinner"},{children:[(0,l.jsx)("div",{className:"spinner"}),(0,l.jsx)("span",V({className:"loading-text"},{children:"LOADING..."}))]})),"success"===t&&(0,l.jsx)("div",V({className:"success-check"},{children:(0,l.jsx)("svg",V({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#4CAF50"})}))})),"error"===t&&(0,l.jsx)("div",V({className:"checkbox error",ref:d,onClick:x},{children:(0,l.jsx)("div",{className:"checkbox-inner error"})}))]})),(0,l.jsx)("div",V({className:"captcha-center"},{children:(0,l.jsx)("span",V({className:"captcha-text"},{children:"I'm not a robot"}))})),(0,l.jsx)("div",V({className:"captcha-right"},{children:(0,l.jsx)("button",V({className:"refresh-button",onClick:function(e){e.stopPropagation(),n("initial"),o("")}},{children:(0,l.jsx)("svg",V({width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{children:(0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"#666"})}))}))}))]})),"error"===t&&i&&(0,l.jsx)("div",V({className:"error-message"},{children:i}))]})}))};var H=function(){return H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},H.apply(this,arguments)},q=function(){function e(e){void 0===e&&(e={}),this.options=H({theme:"light",size:"normal",language:"ko",apiEndpoint:"https://api.realcaptcha.com"},e)}return e.prototype.render=function(e,t){var n=this,r="string"==typeof e?document.getElementById(e):e;if(!r)throw new Error("Container with ID '".concat(e,"' not found"));var i=(0,c.H)(r),o=function(e){t&&"function"==typeof t&&t(e)};return i.render(a().createElement(J,{onComplete:o,theme:this.options.theme,size:this.options.size,language:this.options.language,apiEndpoint:this.options.apiEndpoint})),{destroy:function(){i.unmount()},reset:function(){i.render(a().createElement(J,{onComplete:o,theme:n.options.theme,size:n.options.size,language:n.options.language,apiEndpoint:n.options.apiEndpoint,key:Date.now()}))}}},e.prototype.configure=function(e){this.options=H(H({},this.options),e)},e}();"undefined"!=typeof window&&(window.RealCaptcha=q,window.createRealCaptcha=function(e){return new q(e)},window.renderRealCaptcha=function(e,t,n){return new q(t).render(e,n)});const Y=q;return o})());